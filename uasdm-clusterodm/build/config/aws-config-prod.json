{
    "provider": "aws",
    
    "accessKey": "UASDM_CLUSTER_KEY",
    "secretKey": "UASDM_CLUSTER_SECRET",
    
    "securityGroup": "cluster-odm-node",
    
    "vpcId" : "vpc-04624f4b9b033bc4c",
    
    "usePrivateAddress": true,
    
    "log-level": "debug",
    "debug": true,
    
    "createRetries": 3,

    "monitoring": false,
    "maxRuntime": 259200,
    "maxUploadTime": 259200,
    "region": "us-east-1",
    "tags": ["type,clusterodm"],
    
    "ami": "ami-026c8acd92718196b",
    
    "instanceLimit": 30,

    "spot": false,
    "imageSizeMapping": [
        {"maxImages": 20, "slug": "t3a.small", "spotPrice": 0.05, "storage": 60},
        {"maxImages": 50, "slug": "t3a.medium", "spotPrice": 0.05, "storage": 100},
		{"maxImages": 180, "slug": "t3a.large", "spotPrice": 0.05, "storage": 160},
		{"maxImages": 300, "slug": "t3a.xlarge", "spotPrice": 0.1, "storage": 320},
		{"maxImages": 1000, "slug": "t3a.2xlarge", "spotPrice": 0.2, "storage": 640},
		{"maxImages": 2000, "slug": "r5.2xlarge", "spotPrice": 0.25, "storage": 1200},
		{"maxImages": 3000, "slug": "r5.4xlarge", "spotPrice": 0.5, "storage": 2000},
		{"maxImages": 6000, "slug": "r5.8xlarge", "spotPrice": 1.0, "storage": 4000},
		{"maxImages": 12000, "slug": "r5.12xlarge", "spotPrice": 2.0, "storage": 8000},
		{"maxImages": 24000, "slug": "r5.16xlarge", "spotPrice": 4.0, "storage": 16000}
    ],

    "addSwap": 1,
    "dockerImage": "-v /data/odm/dev/micasense:/opt/micasense -v /data/odm/dev/data/data:/var/www/data -v /data/odm/dev/data/tmp:/var/www/tmp -v /usr/bin/docker:/usr/bin/docker -v /var/run/docker.sock:/var/run/docker.sock -e MICASENSE_HOST_BINDING=/data/odm/dev/micasense --name uasdm-nodeodm 813324710591.dkr.ecr.us-east-1.amazonaws.com/uasdm-nodeodm:latest",
    "additionalMachineSetupCmd": "sudo apt update && sudo apt install -y unzip && curl 'https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip' -o 'awscliv2.zip' && unzip -o -q awscliv2.zip && sudo ./aws/install && aws configure set aws_access_key_id UASDM_CLUSTER_KEY && aws configure set aws_secret_access_key UASDM_CLUSTER_SECRET && sudo su -m -c 'aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin 813324710591.dkr.ecr.us-east-1.amazonaws.com && docker pull 813324710591.dkr.ecr.us-east-1.amazonaws.com/uasdm-micasense:latest && docker pull 813324710591.dkr.ecr.us-east-1.amazonaws.com/uasdm-nodeodm:latest && docker tag 813324710591.dkr.ecr.us-east-1.amazonaws.com/uasdm-micasense:latest uasdm-micasense'"
}