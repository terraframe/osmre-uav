<!-- <div id="app-container" class="container"> -->
    <!-- <div *ngIf="sites.length === 0" class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
            <h4 style="margin-top: 50px;">
                There are no Sites added to the system. Add a Site, Project, Mission, and Collection using the 
                <a routerlink="/viewer" routerlinkactive="active" href="#/viewer">Site Viewer</a> 
                before uploading data to.
            </h4>
        </div>
        <div class="col-md-2"></div>
    </div> -->

    <div class="confirm-modal ui-dialog ui-widget ui-widget-content ui-corner-all ui-front ui-draggable ui-resizable com-runwaysdk-ui-factory-jquery-Dialog com-runwaysdk-ui-factory-runway-Widget ui-dialog-buttons" tabindex="-1" role="dialog">


    <div *ngIf="hierarchy" class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
            <form #ngForm="ngForm">

                <!-- Existing task panel -->
                <div *ngIf="existingTask && !currentTask">
                    <div class="panel panel-warning" style="margin: 30px 0 30px 0;">
                        <div class="panel-heading" style="font-size: 20px;">Partial Upload Detected</div>
                        <div class="panel-body">
                            <h4>A partial upload was detected. You can either cancel that partial upload or attempt to
                                continue.</h4>
                            <h4>
                                <b>To continue an upload</b>
                                please click the Continue Upload button and re-upload your file and we will try our best
                                to continue where you left off.
                            </h4>

                            <hr>
                            <button type="button" class="btn btn-danger" style="margin-top: 20px;"
                                (click)="removeUpload($event)">
                                <i class="icon-upload icon-white"></i>
                                Cancel Upload
                            </button>
                            <button type="button" class="btn btn-primary" style="margin-top: 20px;"
                                (click)="showUploadPanel()">
                                <i class="icon-upload icon-white"></i>
                                Continue Upload
                            </button>
                        </div>
                    </div>
                </div> <!-- End existing task panel -->

                <!-- Task finished upload notification -->
                <div *ngFor="let note of taskFinishedNotifications" class="panel panel-success" style="margin: 30px 0 30px 0;">
                    <div class="panel-heading" style="font-size: 20px;">
                        Upload Details
                        <i class="fa fa-times btn btn-close pull-right" style="min-width:20px;padding:0;line-height: 27px;" (click)="closeTaskFinishedNotification(note.id)"></i>
                    </div>
                    <div class="panel-body">
                        <h4>
                            Status:
                            <b> Upload successfully completed </b>
                        </h4>
                        <h4>
                            Message:
                            <b> Your uploaded data is being processed into final image products. </b>
                        </h4>
                    </div>
                </div> <!-- End task finished upload notification -->

                <div style="margin-top: 30px;" class="" *ngIf="!disabled && !existingTask">
                    
                    <div *ngFor="let key of objectKeys(hierarchy).slice().reverse()" class="form-group">
                        <label for="hierarchy[key].type">{{hierarchy[key].typeLabel}}:</label>
                        <!-- <input [(ngModel)]="values.site" name="site" type="input" class="form-control" disabled="true" /> -->

                        <!-- NOTE: this is for display only and so should not ever be enabled because the ngModel points to 
                        data that is not persisted  -->
                        <select *ngIf="importedValues" name="hierarchy[key].type" [(ngModel)]="hierarchy.type" disabled="true" required>
                            <option [value]="hierarchy.type">{{hierarchy[key].name}}</option>
                        </select> 

                        <!-- <select *ngIf="!importedValues" name="site" (change)="onSiteSelect($event.target.value)" [(ngModel)]="values.site"
                            required>
                            <option></option>
                            <option *ngFor="let site of sites" [value]="site.id">{{site.name}}</option>
                        </select> -->
                    </div>

                    <div class="form-group">
                        <label for="outFileName">Output File Name Prefix:</label>
                        <input [(ngModel)]="values.outFileName" name="outFileName" type="input" class="form-control" placeholder="Output file name prefix..." />
                    </div>
                </div>

                <!-- Current upload indicator -->
                <div class="" [hidden]="!uploadVisible">
                    <div *ngIf="currentTask" class="panel panel-warning" style="margin: 30px 0 30px 0;">
                        <div class="panel-heading" style="font-size: 20px;">Upload Details</div>
                        <div class="panel-body">
                            <h4>
                                Status:
                                <b> {{currentTask.status}} </b>
                            </h4>
                            <h4>
                                Message:
                                <b> {{currentTask.message}} </b>
                            </h4>
                            <h4>
                                Upload Started On:
                                <b> {{currentTask.createDate}} </b>
                            </h4>
                            <h4>
                                Last Updated:
                                <b> {{currentTask.lastUpdatedDate}} </b>
                            </h4>
                            <h4>
                                Elapsed Time:
                                <b> {{uploadCounter}} </b>
                            </h4>
                        </div>
                    </div>

                    <div class="uploader-container" style="margin-top: 20px;" #uploader></div>

                    <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix" style="padding:0; margin-top:20px;">
                        <div class="ui-dialog-buttonset" >
                            <button type="button" [disabled]="disabled" (click)="close()" class="btn btn-default" role="button" aria-disabled="false" style="padding: 4px 18px;">
                                <span class="ui-button-text">Close</span>
                            </button>

                            <button type="button btn btn-primary" [disabled]="!ngForm.valid || disabled" class="btn btn-primary" (click)="handleUpload($event)">
                                <i class="icon-upload icon-white"></i>
                                Upload
                            </button>
                        </div>
                    </div>
                </div> <!-- End current upload indicator -->
            </form>

        </div>
        <div class="col-md-2"></div>
    </div>
    </div>
<!-- </div> -->